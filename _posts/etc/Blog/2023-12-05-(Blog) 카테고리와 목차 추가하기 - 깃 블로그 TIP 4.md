---
title:  "[Blog] 카테고리와 목차 추가하기 - 깃 블로그 TIP 4"
categories : Blog
tag : [블로그, Git, git blog, 깃허브 블로그, Minimal-mistakes, 지킬, jekyll]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
typora-root-url: ../../..
---



# Intro

댓글이나 검색엔진에 노출시키거나 등등 이런거 하나하나 정리할 생각은 없다.

이런것은 본인이 참고했던 [참고문헌](https://youtu.be/3UOh0rKlxjg?si=yGrGhJSgFLH2t3jK) 확인! + [찐 참고문헌](https://ansohxxn.github.io/blog/category/)

그러나, `카테고리`와 `목차`는 중요한 정보라고 생각하기에 이 2개만 정리해보자!

**웹 상단에 존재하는 네비게이션 바의 Category**

![image](https://github.com/BH946/bh946.github.io/assets/80165014/91047770-13ce-4e45-91f5-23cd9b8379c2)  

<br>

**카테고리별 존재하는 대표 페이지**

![image](https://github.com/BH946/bh946.github.io/assets/80165014/5fe7d979-9126-4668-95d0-3d90abd51df2) 

<br>

**왼쪽 사이드바의 카테고리**

<img src="https://github.com/BH946/bh946.github.io/assets/80165014/36349f82-ab47-4dde-b76c-5f2a7087dd3f" alt="image" style="zoom:80%;" />  

<br>

**본문내에 존재하는 목차(TOC)**

<img src="https://github.com/BH946/bh946.github.io/assets/80165014/39d970cb-d55e-4b69-bc10-f6006188efe5" alt="image" style="zoom:80%;" /> 

<br><br>

# 카테고리와 목차

>  위에서 본 사진들은 최근 사진이므로 스타일링이 전부 적용되어 있는 상태입니다!

먼저, 카테고리와 목차 설정을 제대로 따라하고 싶다면 Intro에서 소개한 "참고문헌" 영상을 꼭 참고!

<br>

## 카테고리 웹 상단 추가 + 태그

먼저, `_config.yml` 에서 아래 코드처럼 주석 해제를 해주며 잘 있는지 확인하자

```yaml
category_archive:
  type: liquid
  path: /categories/
tag_archive:
  type: liquid
  path: /tags/
# https://github.com/jekyll/jekyll-archives
jekyll-archives:
  enabled:
    - categories
    - tags
  layouts:
    category: archive-taxonomy
    tag: archive-taxonomy
  permalinks:
    category: /categories/:name/
    tag: /tags/:name/
```

<br>

`_pages` 폴더에 `category-archive.md` 와 `tag-archive.md` 파일을 만들자

```markdown
---
title : "Category"
layout : categories
permalink : /categories/
author_profile : true
sidebar_main : true
---
```

```markdown
---
title : "Tag"
layout : tags
permalink : /tags/
author_profile : true
sidebar_main : true
---
```

<br>

`_data` 폴더에 `navigation.yml` 파일을 아래 코드처럼 작성하면 "웹 상단 네비게이션 바"에 `Category`

```yaml
# main links
main:
  - title: "Home"
    url: /
  - title: "Category" # Tag도 추가해도 됨
    url: /categories/
  - title: "Search"
    url: /search/
```

<br>

여기 까지 성공하면 앞에서 보여준 이부분이 끝난 것이다.

> 웹 상단에 존재하는 네비게이션 바의 Category
>
> ![image](https://github.com/BH946/bh946.github.io/assets/80165014/91047770-13ce-4e45-91f5-23cd9b8379c2) 

<br><br>

## 카테고리별 대표 페이지 추가

먼저 아래와 같이 카테고리를 등록해줍니다! -> 예시로 `_pages/categories/category-algo.md` 

![image](https://github.com/BH946/bh946.github.io/assets/80165014/a24c7ea6-ef89-4b49-97e6-7436900484c4) 

<br>

코드 내용은 아래와 같습니다

* archive 를 레이아웃으로 가지며 include를 보면 `archive-single2.html` 이 존재하는데, 이것은 직접 추가한 파일입니다.
* 이곳의 `title` 은 실제 페이지의 제목이 됩니다.
  * 앞에서 본 "지식/정보" 제목 부분입니다.

![image](https://github.com/BH946/bh946.github.io/assets/80165014/fcebe8c7-caf2-4343-8876-08cfbbe71452) 

<br>

`_includes/archive-single2.html` 의 코드는 아래와 같으며 없으면 만듭니다.

* "[체크리스트] Sprin..." 부분인 게시글 제목 부분 역할을 합니다.
* 코드에 보면 `post__taxonomy.html` 부분이 있는데 이것도 추가한 파일입니다.
  * "[체크리스트] Spr..." 오른쪽에 있는 카테고리, 태그 내용부분 입니다.
* 자꾸 아래 문법이 자동 실행이 되버려서 "사진으로 대체"

![image](https://github.com/BH946/bh946.github.io/assets/80165014/e0aaed99-6b10-4691-b015-3fc13951fb8a) 

```html
<div class="{{ include.type | default: "list" }}__item">
  <article class="archive-item">
      <div>
          <span>
            <a href="{{ post.url }}" style="text-decoration-line: none;">{{post.title}}</a>
          </span>
          <small> 
            <i class="fas fa-fw fa-calendar-alt" aria-hidden="true"> </i>{{ post.date | date: " %Y.%m.%d" }}
            {% if site.category_archive.type and post.categories[0] and site.tag_archive.type and post.tags[0] %}
              {%- include post__taxonomy.html -%}
            {% endif %}
          </small>
      </div>
    </article>
</div>
```

<br>

`_includes/post__taxonomy.html` 의 코드입니다. 자유롭게 커스텀하면 됩니다.

```
<!--Archive page 용-: (post -> page)-->
<!--page__taxonomy.html에서 가져 옴-->

{%- if site.category_archive.type and post.categories[0] -%}
    {%- case site.category_archive.type -%}
        {%- when "liquid" -%}
        {%- assign path_type = "#" -%}
        {%- when "jekyll-archives" -%}
        {%- assign path_type = nil -%}
    {%- endcase -%}

    {% case site.tag_archive.type %}
        {% when "liquid" %}
            {% assign path_type = "#" %}
        {% when "jekyll-archives" %}
            {% assign path_type = nil %}
    {% endcase %}

    {%- if site.category_archive.path and site.tag_archive.path -%}
        {%- capture post_categories -%}{%- for category in post.categories -%}{{ category | downcase }}|{{ category }}{%- unless forloop.last -%},{%- endunless -%}{%- endfor -%}{%- endcapture -%}
        {%- assign category_hashes = post_categories | split: ',' | sort -%}
        {% capture post_tags %}{% for tag in post.tags %}{{ tag | downcase }}|{{ tag }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}
        {% assign tag_hashes = post_tags | split: ',' | sort %}
        <span class="page__taxonomy">
            <span itemprop="keywords">
                <!-- 카테고리 수정하는 곳 -->
                {%- for hash in category_hashes -%}
                    {%- assign keyValue = hash | split: '|' -%}
                    {%- capture category_word -%}{{ keyValue[1] | strip_newlines }}{%- endcapture -%}
                    <a href="{{ category_word | slugify | prepend: path_type | prepend: site.category_archive.path | relative_url }}" class="page__taxonomy-item-category" rel="tag">{{ category_word }} </a>{%- unless forloop.last -%}<span class="sep"> </span>{%- endunless -%}
                {%- endfor -%}
                
                <!-- 여기부터 태그 수정하는 곳 -->
                {% assign check = true %} <!-- check 변수 선언 -->
                {% for hash in tag_hashes %} 
                    {% assign keyValue = hash | split: '|' %}
                    {% capture tag_word %}{{ keyValue[1] | strip_newlines }}{% endcapture %}
                    <a href="{{ tag_word | slugify | prepend: path_type | prepend: site.tag_archive.path | relative_url }}" class="page__taxonomy-item-tag" rel="tag"></a>{% unless forloop.last %}<span class="sep"> </span>{% endunless %}
                    <!-- 원래 a태그 사이에 {{ tag_word }} 로 구성된걸 수정했음 -->
                    {% if check %} <!-- true면 -->
                        {% assign check = false %} <!-- false로 다시 초기화해서 빈 공백 나오게 -->
                    {% endif %}
                {% endfor %}
            </span>
        </span>
    {%- endif -%}
{%- endif -%}
```

<br>

> 카테고리별 존재하는 대표 페이지
>
> ![image](https://github.com/BH946/bh946.github.io/assets/80165014/5fe7d979-9126-4668-95d0-3d90abd51df2) 

<br><br>

## 왼쪽 사이드바에 카테고리 추가

`_includes/nav_list_main` 파일을 만들어서 왼쪽 사이드바의 모습을 구성합니다.

* 확장자명 없습니다!
* 이를 `sidebar.html` 에 포함시키면 됩니다!



`_includes/nav_list_main` 의 코드를 참고하여 커스텀!

```html
<!--전체 글 수를 세기 위한 연산. sum 변수에 전체 글 수 저장-->

{% assign sum = site.posts | size %}

<nav class="nav__list">
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">{{ site.data.ui-text[site.locale].menu_label }}</label>
  <ul class="nav__items" id="category_tag_menu">
      <!--전체 글 수-->
      <li>
            📂 <span style="font-family:'Cafe24Oneprettynight';">전체 글 수</style> <span style="font-family:'Coming Soon';">{{sum}}</style> <span style="font-family:'Cafe24Oneprettynight';">개</style> 
      </li>
      <li>
        <span class="nav__sub-title">REVISE/KNOWLEDGE</span>
            <ul>
                {% for category in site.categories %}
                    {% if category[0] == "Revise" %}
                        <li><a href="/categories/revise" class="">수정전 ({{category[1].size}})</a></li>
                    {% endif %}
                {% endfor %}
            </ul>
            <ul>
                {% for category in site.categories %}
                    {% if category[0] == "Knowledge" %}
                        <li><a href="/categories/knowledge" class="">Knowledge(지식) ({{category[1].size}})</a></li>
                    {% endif %}
                {% endfor %}
            </ul>
        <!--span 태그로 카테고리들을 크게 분류 -->
        <span class="nav__sub-title">CODING TEST</span>
            <!--ul 태그로 같은 카테고리들 모아둔 페이지들 나열-->
            <ul>
                <!--Cpp 카테고리 글들을 모아둔 페이지인 /categories/algo 주소의 글로 링크 연결-->
                <!--category[1].size 로 해당 카테고리를 가진 글의 개수 표시--> 
                {% for category in site.categories %}
                    {% if category[0] == "Baekjoon" %}
                        <li><a href="/categories/baekjoon" class="">Baekjoon(백준 개념) ({{category[1].size}})</a></li>
                    {% endif %}
                {% endfor %}
            </ul>
            <ul>
              {% for category in site.categories %}
                  {% if category[0] == "BaekjoonTest" %}
                      <li><a href="/categories/baekjoontest" class="">Baekjoon(백준 문제) ({{category[1].size}})</a></li>
                  {% endif %}
              {% endfor %}
          </ul>
          <ul>
            {% for category in site.categories %}
                {% if category[0] == "ProgrammersTest" %}
                    <li><a href="/categories/programmerstest" class="">Programmers(프로그래머스 문제) ({{category[1].size}})</a></li>
                {% endif %}
            {% endfor %}
        </ul>
          <!-- 코드가 너무 많아서 생략... -->
            <ul>
              {% for category in site.categories %}
                  {% if category[0] == "WoowaCourse" %}
                      <li><a href="/categories/wwc" class="">WoowaCourse ({{category[1].size}})</a></li>
                  {% endif %}
              {% endfor %}
            </ul>
      </li>
  </ul>
</nav>
```

<br>

`sidebar.html` 의 코드 - 핵심은 nav_list_main 를 include 하는 코드입니다!

```html
{% if page.author_profile or layout.author_profile or page.sidebar %}
  <div class="sidebar sticky">
  {% if page.author_profile or layout.author_profile %}{% include author-profile.html %}{% endif %}
  {% if page.sidebar %}
    {% for s in page.sidebar %}
      {% if s.image %}
        <img src="{{ s.image | relative_url }}"
             alt="{% if s.image_alt %}{{ s.image_alt }}{% endif %}">
      {% endif %}
      {% if s.title %}<h3>{{ s.title }}</h3>{% endif %}
      {% if s.text %}{{ s.text | markdownify }}{% endif %}
      {% if s.nav %}{% include nav_list nav=s.nav %}{% endif %}
    {% endfor %}
    {% if page.sidebar.nav %}
      {% include nav_list nav=page.sidebar.nav %}
    {% endif %}
  {% endif %}

  {% if page.sidebar_main %}
    {% include nav_list_main %}
  {% endif %}
  </div>
{% endif %}
```

<br>

마지막으로 `_config.yml` 과 `index.html` 에 `sidebar_main: true` 로 설정되어있나 확인 필수!

<br>

> 왼쪽 사이드바의 카테고리
>
> <img src="https://github.com/BH946/bh946.github.io/assets/80165014/36349f82-ab47-4dde-b76c-5f2a7087dd3f" alt="image" style="zoom:80%;" />  

<br><br>

## 목차(TOC) 설정

정말 정말 간단하게 포스팅 하는 md파일속에 `toc: true` 를 사용하면 끝이다.

아래에 설명할 "세팅이 완료된 후 포스팅 방식" 부분을 참고하자!

> 본문내에 존재하는 목차(TOC)
>
> <img src="https://github.com/BH946/bh946.github.io/assets/80165014/39d970cb-d55e-4b69-bc10-f6006188efe5" alt="image" style="zoom:80%;" /> 

<br><br>

## 세팅이 완료된 후 포스팅 방식

**본인의 경우** `--- ... ---` **에 작성하는 코드는 아래와 같습니다.**

* title 을 통해 제목!
* categories 를 통해 카테고리별 대표 페이지 만들었던 md 파일에서의 `site.categories.Blog` 의 Blog 작성
* tag 를 여러가지 작성하여 "search" 가 잘 되게끔
* toc 를 true로 하여 "목차"를 사용
* toc_stiky 를 true로 하여 "목차고정"을 사용
* author_profile 을 false로 하여 기존 프로필을 가리고, sidebar-nav-"docs" 를 활성화하여 나타냅니다.
  * `_data/navigation.yml` 에 따로 등록해놨으며 이 내용은 다음 포스팅에서 추가 설명 합니다.
* typora-root-url 로 root 경로를 설정하여 이미지 경로를 상대경로로 잘 맞춰 둡니다.

```markdown
---
title:  "[Blog] 페이지 화면 커스텀(크기, 너비, 밑줄 등)"
categories : Blog
tag : [블로그, Git, git blog, 깃허브 블로그, Minimal-mistakes, 지킬, jekyll]
toc: true
toc_sticky: true
author_profile: false
sidebar:
  nav: "docs"
typora-root-url: ../../..
---
```

<br>

**카테고리를 추가할 때 흐름은** `카테고리별 대표 페이지 생성 -> nav_list_main 작성 -> 실제 포스팅할 때 categories 입력` 

Blog 카테고리를 예로들자면

* 먼저, `_pages/categories/category-blog.md` 파일을 만들고 카테고리명을 Blog로 설정합니다.

  ```markdown
  ---
  title: "Blog"
  layout: archive
  permalink: categories/blog
  author_profile: true
  sidebar_main: true
  ---
  
  {% assign posts = site.categories.Blog %}
  {% for post in posts %} {% include archive-single2.html type=page.entries_layout %} {% endfor %}
  ```

* 그리고 `_includes/nav_list_main` 에서 해당 카테고리를 적절히 추가합니다.

  ```html
  <ul>
      {% for category in site.categories %}
      {% if category[0] == "Blog" %}
      <li><a href="/categories/blog" class="">Blog ({{category[1].size}})</a></li>
      {% endif %}
      {% endfor %}
  </ul>
  ```

* 마지막으로 포스팅할 때 이 카테고리를 사용합니다.

  ```markdown
  ---
  ...
  categories : Blog
  ...
  ---
  ```

  
